{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <title>Lumpia.natics System</title>
        <link rel="stylesheet" type="text/css" href="{% static '/bootstrap-5.3.0-alpha1-dist/css/bootstrap.css' %}">
        <meta charset="utf-8">
    </head>
    
    <body>
        <div class="container">
            <div class = "row">
                <div class="col my-auto" style="padding-left: 140px">
                    <h1>Item List</h1>
                    <h3>View Item</h1>
                </div>
                <div class="col-5 p-4 border border-dark rounded mt-5 bg-light">
                        <div class = "p-2">
                            <label style="padding-right: 108px"><b>Product Name:</b> {{p.name}}</label>
                        </div>
                        <div class = "p-2">
                            <label style="padding-right: 180px"><b>Price:</b> {{p.price}}</label>
                        </div>
                        <div class="p-2">
                            <label style="padding-right: 169px"><b>Stocks:</b> {{p.stocks}}</label>
                        </div>
                        <div class = "p-2">
                            <label style="padding-right: 126px"><b>Target Level:</b> {{p.target_level}}</label>
                        </div>
                        <div class = "p-2">
                            <label style="padding-right: 100px"><b>Units Per Order:</b> {{p.units_per_order}}</label>
                        </div>
                        <div class = "p-2">
                            <label style="padding-right: 120px"><b>Group Name:</b> {{p.group_name}}</label>
                        </div>
                        <div class = "p-2">
                            <label style="padding-right: 56px"><b>Unit of Measurement:</b> {{p.unit_of_measurement}}</label>
                        </div>
                        <div hidden class = "p-2">
                            <label style="padding-right: 180px" id="stocks">{{p.stocks}}</label>
                        </div>
        
                        <p class = "p-2">
                            <div class="row" style="padding-left: 22px">
                                <div class="col">
                                    <a href="{% url 'update_product' pk=p.pk %}" class="btn btn-success">Update</a>
                                </div>
                                <div class="col">
                                    <a href="{% url 'delete_product' pk=p.pk %}" id="delete" class="btn btn-danger">Delete</a>
                                </div>
                                <div class="col">
                                    <a href="{% url 'edit_productlist' %}" class="btn btn-warning">Return</a>
                                </div>
                            </div>
                        </p>
                </div>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>
            document.getElementById("delete").addEventListener("click", function(event){
                stocks = document.getElementById("stocks").textContent;
                stocks = Number(stocks);

                if (stocks > 0)
                {
                    alert("Stocks must be empty before it can be deleted.");
                    return event.preventDefault();
                }
                
                if (stocks <= 0)
                {
                    if (confirm("Are you sure you want to delete this item?") == true)
                    {
                        return true;
                    }

                    else 
                    {
                        return event.preventDefault();
                    }

                }
            });
        </script>

    </body>

</html>