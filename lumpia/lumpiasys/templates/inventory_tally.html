{% load static %}

<!DOCTYPE html>
<html>

<head>
    <title>Lumpia.natics System</title>
    <link rel="stylesheet" type="text/css" href="{% static '/bootstrap-5.3.0-alpha1-dist/css/bootstrap.css' %}">
    <meta charset="utf-8">
</head>

<body>
    <div class="container mt-5">
        <!--<form method="POST" action="{% url 'confirm_inventory' %}" onsubmit="validate()"></form>-->
        <form method="POST" action="" onsubmit="validate();">{% csrf_token %}
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Units Sold</th>
                        <th>Counted Units</th>
                        <th>Remarks</th>
                    </tr>
                </thead>

                {% for order in orders %}
                <tr id="for-loop">
                    <td class="item">{{order.item_name}}</td>
                    <td class="units_sold">{{order.units_sold}}</td>
                    <td><input type="text" name="counted_units" value="0" class="counted_units"></td>
                    <td><input type="text" name="remarks" value="" class="remark"></td>
                </tr>
                {% endfor %}
            </table>
            
            <button type="submit" class="btn btn-success submit_button">Record</button>
            <a href="{% url 'home' %}" class="btn btn-danger">Return to Home</a>
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>
           function validate()
           {
            item = document.getElementsByClassName("item")
            counted_units = document.getElementsByClassName("counted_units")
            units_sold = document.getElementsByClassName("units_sold")
            remarks = document.getElementsByClassName("remark")
            invalid = []

            for (let i = 0; i < document.getElementsByClassName("counted_units").length; i++)
            {
                item = item[i].innerHTML
                comparison = counted_units[i].value
                input = units_sold[i].innerHTML
                input_remark = remarks[i].value
                
                if (comparison != input)
                {
                    //invalid.append(item)
                    console.log("hi")
                    return false    
                }
            }

            // if (invalid.length > 0)
            // {
            //     alert_msg = "Double-check the following: \n"
            //     for (let j = 0; j < invalid.length ; j++)
            //     {
            //         alert_msg = invalid[j] + " "
            //     }
            //     console.log(alert_msg)
            //     return false
            // }
           }
        </script>

</body>



<footer class="my-5 pt-5 text-muted text-center text-small">
    <p>Date Today: {{current_date}}</p>
</footer>

</html>